(function(){
  angular.module('endodonticApp', ['templates', 'ng-rails-csrf'])
    .controller('EndodonticController', ['$scope', function($scope) {
      $scope.endo = {
        com_dolor: '2',
        dolor: '2',
        inten: '3',
        carac1: true,
        carac2: false,
        carac3: true,
        carac4: false,
        estim1: true,
        estim2: false,
        estim3: true,
        estim4: false,
        inf_adi: 'hola hola',
        exa_ext: 'extra',
        exa_int: 'intra',
        exa_rad: 'rad',
      };
    }])
    .controller('GeneralEndodonticController', ['$http','$filter', function($http, $filter) {      
      var general = this;
      general.tooths = [];
      this.diagnosis = diagnosis;

      $http.get('/load_odontogram', { params: { atencion_salud_id: atencion_salud_id, tipo: 'default' } }).success(function(data){
        general.tooths = data;
      });

      this.showTooltip = function(event) {   
        $( "#tooltip_endodoncia" ).addClass('flex');
        $( "#tooltip_endodoncia" ).removeClass('hidden');
        $( "#tooltip_endodoncia" ).show(); 
      };
      this.selectTooth = function(event) {   

      };
    }])
    .directive('diagnosisTest', function(){ 
      return {
        restrict: 'E',
        templateUrl: 'diagnosis-test.html'
      }; 
    })
    .directive('diagnosisTestPanel', function(){ 
      return {
        restrict: 'E',
        scope: {
          valor: '=',
          tipo: '='
        },
        templateUrl: 'diagnosis-test-panel.html',
        link: function(scope, element, attrs) {
                scope.setTest = function(tipo,valor) {
                  console.log(element);
                  console.log(tipo);
                  console.log(valor);
                  

                };
            }
        
      }; 
    })
    .directive('tooltipEndodoncia', function(){ 
      return {
        restrict: 'E',
        templateUrl: 'tooltip-endodoncia.html'
      }; 
    })
    .directive('endodonciaSeleccion', function(){ 
      return {
        restrict: 'E',
        templateUrl: 'endodoncia-seleccion.html'
      }; 
    });

  angular.element("#endodontic").ready(function() {
    angular.bootstrap("#endodontic", ['endodonticApp']);
  });

  var diagnosis = [ 
    {
      name: '18',
      calor: '1',
      electrico: '2',
      percusion: '3',
      palpacion: '4'
    },
    {
      name: '19',
      calor: '4',
      electrico: '3',
      percusion: '2',
      palpacion: '1'
    }
  ];
})();
