(function(){
  var app = angular.module('odontogram', ['templates']);

  app.controller('OdontogramController', function($filter){
    this.tooths = tooths;
    this.diag = 1;

    this.selectDiag = function(setDiag) {
      this.diag = setDiag;
    };

    this.setDiag = function(tooth,tipo_cara){      
      var diagnosticos = ['sano','caries','composite','sellante','amalgama','incrustacion'];
      tooth[tipo_cara] = diagnosticos[this.diag-1];
    };

    this.setCarac = function(tipo_carac,event){      
      var id = angular.element(event.target).parent().parent().find("img").attr('id');
      tooth= $filter('filter')(tooths, function (d) {return d.name === id;})[0];
      tooth.caracteristica = tipo_carac;
      $( "#tooltip_dental" ).hide();
    };

    this.isSelected = function(checkDiag){
      return this.diag === checkDiag;
    };

    this.showTooltip = function(event) {      
      angular.element(event.target).parent().append($( "#tooltip_dental" )); 
      $( "#tooltip_dental" ).addClass('flex');
      $( "#tooltip_dental" ).removeClass('hidden');
      $( "#tooltip_dental" ).show(); 
    };

  });

  app.directive('toothName', function(){ 
    return {
      restrict: 'E',
      templateUrl: 'tooth-name.html'
    }; 
  });

  app.directive('toothPanel', function(){ 
    return {
      restrict: 'E',
      templateUrl: 'tooth-panel.html'
    }; 
  });

  app.directive('toothImage', function(){ 
    return {
      restrict: 'E',
      templateUrl: 'tooth-image.html'
    }; 
  });

  var tooths = [
    {
      name: '18',
      cara_dental: false,
      image: '<%= image_url("dental/od_1/18.jpg") %>',
      diag_distal: 'caries',
      diag_vestibular: 'caries',
      diag_mesial: 'caries',
      diag_palatina: 'caries',
      diag_central: 'caries',
      caracteristica: 'extraccion', 
    },
    {
      name: '17',
      cara_dental: false,
      image: '<%= image_url("dental/od_1/17.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '16',
      cara_dental: false,
      image: '<%= image_url("dental/od_1/16.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '15',
      cara_dental: false,
      image: '<%= image_url("dental/od_1/15.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '14',
      cara_dental: false,
      image: '<%= image_url("dental/od_1/14.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '13',
      cara_dental: true,
      image: '<%= image_url("dental/od_1/13.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '12',
      cara_dental: true,
      image: '<%= image_url("dental/od_1/12.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '11',
      cara_dental: true,
      image: '<%= image_url("dental/od_1/11.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '21',
      cara_dental: true,
      image: '<%= image_url("dental/od_2/21.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '22',
      cara_dental: true,
      image: '<%= image_url("dental/od_2/22.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '23',
      cara_dental: true,
      image: '<%= image_url("dental/od_2/23.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '24',
      cara_dental: false,
      image: '<%= image_url("dental/od_2/24.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '25',
      cara_dental: false,
      image: '<%= image_url("dental/od_2/25.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '26',
      cara_dental: false,
      image: '<%= image_url("dental/od_2/26.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '27',
      cara_dental: false,
      image: '<%= image_url("dental/od_2/27.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '28',
      cara_dental: false,
      image: '<%= image_url("dental/od_2/28.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '48',
      cara_dental: false,
      image: '<%= image_url("dental/od_4/48.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '47',
      cara_dental: false,
      image: '<%= image_url("dental/od_4/47.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '46',
      cara_dental: false,
      image: '<%= image_url("dental/od_4/46.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '45',
      cara_dental: false,
      image: '<%= image_url("dental/od_4/45.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '44',
      cara_dental: false,
      image: '<%= image_url("dental/od_4/44.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '43',
      cara_dental: true,
      image: '<%= image_url("dental/od_4/43.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '42',
      cara_dental: true,
      image: '<%= image_url("dental/od_4/42.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '41',
      cara_dental: true,
      image: '<%= image_url("dental/od_4/41.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '31',
      cara_dental: true,
      image: '<%= image_url("dental/od_3/31.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '32',
      cara_dental: true,
      image: '<%= image_url("dental/od_3/32.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '33',
      cara_dental: true,
      image: '<%= image_url("dental/od_3/33.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '34',
      cara_dental: false,
      image: '<%= image_url("dental/od_3/34.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '35',
      cara_dental: false,
      image: '<%= image_url("dental/od_3/35.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '36',
      cara_dental: false,
      image: '<%= image_url("dental/od_3/36.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '37',
      cara_dental: false,
      image: '<%= image_url("dental/od_3/37.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    },
    {
      name: '38',
      cara_dental: false,
      image: '<%= image_url("dental/od_3/38.jpg") %>',
      diag_distal: 'sano',
      diag_vestibular: 'sano',
      diag_mesial: 'sano',
      diag_palatina: 'sano',
      diag_central: 'sano',
      caracteristica: 'normal',
    }
  ];

})();
