function keep_checking(){current!=$("#datetimepicker1").val()&&($("#new_user").bootstrapValidator("revalidateField","date"),current=$("#datetimepicker1").val()),setTimeout(keep_checking,2e3)}function getFechaActual(){var e=new Date,a=e.getDate(),r=e.getMonth()+1,s=e.getFullYear();return 10>a&&(a="0"+a),10>r&&(r="0"+r),s+"-"+r+"-"+a}function ajuste2_label_better(e){var a={position:"top",animationTime:500,easing:"ease-in-out",offset:5,hidePlaceholderOnFocus:!0};btn=$("#"+e),btn.parent().find(".lb_label").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(this).remove()}).removeAnimate(a,btn),btn.parent().find(".lb_label").removeClass("active")}function ajuste_label_better(e){var a={position:"top",animationTime:500,easing:"ease-in-out",offset:5,hidePlaceholderOnFocus:!0};btn=$("#"+e);var r=btn.data("new-placeholder")||btn.attr("placeholder"),s=btn.data("position")||a.position;$("<div id='lb_label"+btn.attr("id")+"' class='lb_label "+s+"'>"+r+"</div>").css("opacity","0").insertAfter(btn).animateLabel(a,btn),btn.parent().find(".lb_label").addClass("active")}function actualizar_atenciones(){$("a, button").toggleClass("active"),$.ajax({type:"POST",url:"/actualizar_atenciones",data:{},success:function(){$("a, button").toggleClass("active")},error:function(){}})}var current=$("#datetimepicker1").val();keep_checking(),$("#rut").keyup(function(){$(".error-rut").hide()}),$("#user_password,#user_password_confirmation").keyup(function(){$(".error-password").hide()}),$("#span-sign-in").text().trim()&&($("#sign-in-error").css("display","block !important"),$("#sign-in-error").show()),$("#span-recuperar").text().trim()&&($("#recuperar-error").css("display","block !important"),$("#recuperar-error").show()),$("#span-cuenta").text().trim()&&($("#cuenta-error").css("display","block !important"),$("#cuenta-error").show()),$("#span-password").text().trim()&&($("#password-error").css("display","block !important"),$("#password-error").show()),$("#sign-in-form").submit(function(){var e=!1;return $("#user_email").val().length>0&&$("#user_password").val().length&&(e=!0),e}),$("#new_user").submit(function(){var e=!0;return rut=$("#rut").val(),""!=rut?(dv=$("#dv").val(),"k"===dv&&(dv="K"),verificacion=jQuery.calculaDigitoVerificador(rut),dv!=verificacion&&(e=!1,$(".error-rut").show())):e=!1,password=$("#user_password").val(),password_confirmation=$("#user_password_confirmation").val(),password!=password_confirmation&&(e=!1,$(".error-password").show()),e}),$("#new_password").submit(function(){var e=!0;return password=$("#user_password").val(),password_confirmation=$("#user_password_confirmation").val(),password!=password_confirmation&&(e=!1,$(".error-password").show()),e}),$("#contactForm").submit(function(){return!1}),$("#sign-in-form").bootstrapValidator({fields:{"user[email]":{validators:{emailAddress:{message:"Ingresa una direcci\xf3n v\xe1lida de correo electr\xf3nico"}}}},onError:function(){$("#inicia_sesion").prop("disabled",!1)}}),$("#sign-in-form2").bootstrapValidator({fields:{"user[email]":{validators:{emailAddress:{message:"Ingresa una direcci\xf3n v\xe1lida de correo electr\xf3nico"}}}}}),$("#datetimepicker1").datetimepicker({locale:"es",format:"YYYY-MM-DD",viewMode:"years"}),$("#new_user").bootstrapValidator({fields:{"user[email]":{validators:{emailAddress:{message:"Ingresa una direcci\xf3n v\xe1lida de correo electr\xf3nico"}}},sexo:{validators:{notEmpty:{message:"Este campo es requerido"}}},rut:{validators:{digits:{message:"Ingresa solo n\xfameros"}}},celular:{validators:{digits:{message:"Ingresa solo n\xfameros"}}},"user[password]":{validators:{stringLength:{message:"Ingresa una contrase\xf1a de al menos 6 car\xe1cteres"},notEmpty:{message:"La contrase\xf1a es requerida"}}},"user[password_confirmation]":{validators:{stringLength:{message:"Ingresa una contrase\xf1a de al menos 6 car\xe1cteres",notEmpty:{message:"La contrase\xf1a es requerida"}}}},date:{validators:{notEmpty:{message:"La fecha de nacimiento es requerida"},date:{format:"YYYY-MM-DD",min:"1900-01-01",max:getFechaActual(),message:"Formato no v\xe1lido o fecha incorrecta"}}}}}),$("#new_password").bootstrapValidator({fields:{"user[password]":{validators:{stringLength:{message:"Ingresa una contrase\xf1a de al menos 6 car\xe1cteres"},notEmpty:{message:"La contrase\xf1a es requerida"}}},"user[password_confirmation]":{validators:{stringLength:{message:"Ingresa una contrase\xf1a de al menos 6 car\xe1cteres",notEmpty:{message:"La contrase\xf1a es requerida"}}}}}}),$("#contactForm").bootstrapValidator({fields:{email:{validators:{emailAddress:{message:"Ingresa una direcci\xf3n v\xe1lida de correo electr\xf3nico"}}}},onSuccess:function(){var e=$("#name").val(),a=$("#email").val(),r=$("#phone").val(),s=$("#message").val();$.ajax({type:"POST",url:"/enviar_correo_contacto",data:{nombre:e,correo:a,telefono:r,mensaje:s},success:function(){alert("enviado")},error:function(){"Hubo un problema al enviar el correo."}})}}),$("#recuperar").bootstrapValidator({fields:{"user[email]":{validators:{emailAddress:{message:"Ingresa una direcci\xf3n v\xe1lida de correo electr\xf3nico"}}}}}),$("#sign-in-form").find("#user_email").change(function(){$("#user_email").val().length>0?($("#lb_labeluser_email").length||ajuste_label_better("user_email"),$("#lb_labeluser_password").length||ajuste_label_better("user_password")):$("#user_password").val().length<1&&ajuste2_label_better("user_password")}),$(window).scroll(function(){var e=$(window).scrollTop();e>50?($(".navbar-fixed-top").removeClass("navbar-ajuste"),$(".navbar-fixed-top").addClass("navbar-ajuste2"),$("a").removeClass("active-ajuste"),$("a.active").addClass("active-ajuste")):($(".navbar-fixed-top").addClass("navbar-ajuste"),$(".navbar-fixed-top").removeClass("navbar-ajuste2"),$("a").removeClass("active-ajuste")),$("section").each(function(a){var r=$(this).position().top;e+50>=r&&($(".navbar-fixed-top a.active").removeClass("active"),$(".navbar-fixed-top a").eq(a).addClass("active")),e>=0&&580>e&&$(".home").css("background-image","url(../assets/bg1.jpg)"),e>=580&&1300>e&&$(".home").css("background-image","url(../assets/bg2.jpg)"),e>=1300&&2020>e&&$(".home").css("background-image","url(../assets/bg3.jpg)"),e>=2020&&2660>e&&$(".home").css("background-image","url(../assets/bg4.jpg)"),e>=2660&&3490>e&&$(".home").css("background-image","url(../assets/bg5.jpg)"),e>=3490&&$(".home").css("background-image","url(../assets/bg6.jpg)")})}),$(".label_better").label_better({position:"top",animationTime:500,easing:"ease-in-out",offset:5}),$("input.label_better2").label_better({position:"top",animationTime:500,easing:"ease",offset:40}),$("textarea.label_better2").label_better({position:"top",animationTime:500,easing:"ease",offset:180}),$("#actualizar , #actualizar2 ").on("click",function(){actualizar_atenciones()}),($("#horas-agendadas").length||$("#atencion-salud").length)&&window.setInterval(function(){$.ajax({type:"POST",url:"/revisar_actualizaciones",data:{},success:function(e){if(e.respuesta&&(actualizar_atenciones(),$("#atencion-salud").length))for(var a=0;a<e.llegadas.length;++a)createGrowl(!1,"Lleg\xf3 paciente de las "+e.llegadas[a].hora_comienzo)},error:function(){}})},3e4),$.calculaDigitoVerificador=function(e){if(!e||!e.length||"string"!=typeof e)return-1;for(var a=[2,3,4,5,6,7,2,3],r=0,s=e.length-1;s>=0;s--){var t=e.charAt(s);r+=new Number(t)*a[e.length-(s+1)]}var o=11-r%11;return 11===o?0:10===o?"K":o};